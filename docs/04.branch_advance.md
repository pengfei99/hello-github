# 4. Branch advance

In chapitre 3, we have seen the basics of branch, now we need to use branch to help us to develop a project.

# 4.1 Bug fixing branch

Suppose you are working on dev branch, but there is a bug you need to fix. But your current work does not complete, and
you don't want to commit it. You can use below workflow

- Save changes to branch A.
- Run git stash.
- Check out branch B.
- Fix the bug in branch B.
- Commit and (optionally) push to remote.
- Check out branch A
- Run git stash pop to get your stashed changes back.
 

check below example

```shell
# go to dev branch
git checkout dev

# add below line in test/doc1.txt
# working on some thing, don't want to commit

# stash the current change
git stash

# create a new branch
git checkout -b fix/issue-101

# update the line "update to version 5" to "update to version 5 add some bug fixing code here"
# commit the change
git add test/doc1.txt 
git commit -m "fix bug for issue-101"

# go back to main branch and merge the branch fix/issue-101
git checkout main
git merge --no-ff -m "merge fix bug" fix/issue-101

# after merge you can delete the branch  
git branch -d fix/issue-101

# go back to dev branch
git checkout dev

# check the stash list
git stash list

# take the last stash on the list
git stash pop
```

## 4.2 Abandon an un commit branch

Sometime, you need to delete a branch that are not merged to the main.

Check below example

```shell
# create a new branch
git checkout -b feature/add_ai

# add a file and some code in it
# commit the change
git add test/add_ai.txt
git commit -m "add ai"

# go back to main
git checkout main

# delete the branch feature/add_ai
git branch -d feature/add_ai 

```

You should see below output

```text
error: The branch 'feature/add_ai' is not fully merged.
If you are sure you want to delete it, run 'git branch -D feature/add_ai'.
```

Git protects unmerged branch to be deleted. To force the deletion, you need to use option **-D**

```shell
git branch -D feature/add_ai
```

## 4.3 Work with remote branch

Working with remote branch, you need to download it or upload it.

```shell
# add a new branch 
git checkout -b feature/add_ai

# add some file and commit it
git add test/add_ai.txt 
git commit -m "add ai"

# push branch to remote server
git push origin feature/add_ai

# delete branch locally
git branch -D feature/add_ai

# as we have pushed it to remote server, we can get it back even after delete
# download branch from remote server to local
git checkout -b feature/add_ai origin/feature/add_ai
```

## 4.4 Handle conflict with remote server

首先，可以试图用git push origin <branch-name>推送自己的修改；

如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；

如果合并有冲突，则解决冲突，并在本地提交；

没有冲突或者解决掉冲突后，再用git push origin <branch-name>推送就能成功！

如果git pull提示no tracking information，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream-to <branch-name> origin/<branch-name>

If you push to remote server failed, it means the remote branch has newer commit than you. 

Check below example

```shell
# push to remote
git push origin main

# failed, you can see output
```